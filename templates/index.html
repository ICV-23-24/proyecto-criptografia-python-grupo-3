<!DOCTYPE html>
<html lang="en">
<style>
.simetrico{
    display: flex;
}
.simetricoaes, .simetricodes{
    width:50%;
}
</style>
<head>
    <meta charset="UTF-8">
    <title>Cifrador y Descifrador de archivos</title>
</head>

<body>
    {% extends "layout.html" %}
    {% block content %}

    <div class="simetrico">
        <div class="simetricoaes">

    <h1>AES Encryption</h1>
    
    <!-- Formulario para generar la clave -->
    <form action="/otro/generate-key" method="GET">
        <button type="submit">Generar Clave</button>
    </form>

    <!-- Formulario para cifrar archivo -->
    <form action="/encrypt-file" method="POST" enctype="multipart/form-data">
        <label for="key">Seleccionar Clave:</label>
        <input type="file" id="key" name="key" required><br><br>

        <label for="file">Seleccionar Archivo a Cifrar:</label>
        <input type="file" id="file" name="file" required><br><br>

        <label for="save_option">Guardar en:</label>
        <select name="save_option" id="save_option">
            <option value="local">Local</option>
            <option value="destino">Drive</option>
        </select>

        <button type="submit">Cifrar Archivo</button>
    </form>

    <!-- Formulario para descifrar archivo -->
    <form action="/decrypt-file" method="POST" enctype="multipart/form-data">
        <label for="key-decrypt">Seleccionar Clave:</label>
        <input type="file" id="key-decrypt" name="key" required><br><br>

        <label for="file-decrypt">Seleccionar Archivo a Descifrar:</label>
        <input type="file" id="file-decrypt" name="file" required><br><br>

        <label for="save_option">Guardar en:</label>
        <select name="save_option" id="save_option">
            <option value="local">Local</option>
            <option value="destino">Drive</option>
        </select>
        <button type="submit">Descifrar Archivo</button>
    </form>
</div>
<div class="simetricodes">

    <h1>Algoritmo DES</h1>
        
    <!-- Formulario para generar la clave -->
    <form action="/generate-keydes" method="GET">
        <button type="submit">Generar Clave</button>
    </form>

    <!-- Formulario para cifrar archivo -->
    <form action="/encrypt-filedes" method="POST" enctype="multipart/form-data">
        <label for="key">Seleccionar Clave:</label>
        <input type="file" id="key" name="key" required><br><br>

        <label for="file">Seleccionar Archivo a Cifrar:</label>
        <input type="file" id="file" name="file" required><br><br>

        <label for="save_option">Guardar en:</label>
        <select name="save_option" id="save_option">
            <option value="local">Local</option>
            <option value="destino">Drive</option>
        </select>
        <button type="submit">Cifrar Archivo</button>
    </form>

    <!-- Formulario para descifrar archivo -->
    <form action="/decrypt-filedes" method="POST" enctype="multipart/form-data">
        <label for="key-decrypt">Seleccionar Clave:</label>
        <input type="file" id="key-decrypt" name="key" required><br><br>

        <label for="file-decrypt">Seleccionar Archivo a Descifrar:</label>
        <input type="file" id="file-decrypt" name="file" required><br><br>

        <label for="save_option">Guardar en:</label>
        <select name="save_option" id="save_option">
            <option value="local">Local</option>
            <option value="destino">Drive</option>
        </select>
        <button type="submit">Descifrar Archivo</button>
    </form>

</div>
</div>   
    <h2>Subir clave al NAS</h2>
    <form action="/subir_clave" method="post" enctype="multipart/form-data">
        <label for="clave">Seleccionar la clave para subir a Drive:</label>
        <input type="file" name="clave" id="clave" accept=".key">
        <button type="submit">Subir Clave a Drive</button>
    </form>

    <hr>

    <h1>Cifrado Asimétrico</h1>
    <h2>Generar Claves</h2>
    <form action="/generate_keys" method="get">
        <button type="submit">Generar Claves</button>
    </form>
    <h2>Generar y descargar claves</h2>
    <form action="/generate_and_download_keys" method="get">
        <button type="submit" formaction="/download_private_key">Descargar Clave Privada</button>
        <button type="submit" formaction="/download_public_key">Descargar Clave Pública</button>
    </form>

    <h2>Cifrar archivo con clave pública</h2>
    <form action="/cifrar_con_clave_publica" method="post" enctype="multipart/form-data">
    <label for="file">Seleccionar el archivo a cifrar:</label>
    <input type="file" name="file" id="file" accept=".txt">
    <br>

    <label for="public_key_file">Seleccionar la clave pública:</label>
    <input type="file" name="public_key_file" id="public_key_file" accept=".pem">
    <br>
<label for="save_option">Guardar en:</label>
        <select name="save_option" id="save_option">
            <option value="local">Local</option>
            <option value="destino">Drive</option>
        </select>
        <button type="submit">Cifrar Archivo</button>
</form>


<h2>Descifrar archivo con clave privada</h2>
<form action="/descifrar_con_clave_privada" method="post" enctype="multipart/form-data">
    <label for="file_to_decrypt">Seleccionar el archivo cifrado:</label>
    <input type="file" name="file" id="file_to_decrypt" accept=".txt">
    <br>

    <label for="private_key_file">Seleccionar la clave privada:</label>
    <input type="file" name="private_key_file" id="private_key_file" accept=".pem">
    <br>

    <button type="submit">Descifrar archivo con clave privada</button>
</form>
<hr>
    
   
    <h2>Subir Clave Pública</h2>
    <form action="/upload_public_key" method="post" enctype="multipart/form-data">
        <input type="file" name="public_key_file" accept=".pem">
        <button type="submit">Subir Clave Pública</button>
    </form>

    
    <h2>Listar Claves Públicas</h2>
    <form action="/listar_claves_publicas" method="get">
        <button type="submit">Listar Claves Públicas</button>
    </form>

    <h2>Claves Públicas Subidas</h2>
    <ul>
        {% for public_key in public_keys %}
            <li>{{ public_key }}</li>
        {% endfor %}
    </ul>
{% endblock %}
</body>
</html>
